<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="ISO-8859-1"/>
	<title>Bikes</title>
	<link rel="stylesheet" href="../../../css/carousel.css" th:href="@{/css/carousel.css}" />
	<link rel="stylesheet" href="../../../css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}" />
	<link rel="stylesheet" href="../../../css/font-awesome.min.css" th:href="@{/css/font-awesome.min.css}" />
	<link rel="stylesheet" href="../../../css/style.css" th:href="@{/css/style.css}" />
	<link rel="stylesheet" href="../../../css/my_css.css" th:href="@{/css/my_css.css}" />
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
	   integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ=="
	   crossorigin=""/>
</head>

<body>
	<script type="text/javascript" src="../../../js/city_manager.js" th:href="@{/js/city_manager.js}"> </script>
	
    <div id="my-left-panel">
       <table id="cities">
        <tr th:each="city : ${Cities}">
            <td>
			 <form action ="/" th:method="${CityChoose == null || city.name != CityChoose.name? 'POST' : 'GET'}">
			 	 <input type="hidden" id="lastCity" name="lastCity" onclick="" th:value="${CityChoose != null? CityChoose.name : ''}"/>
	           	 <label for="city" th:class="${CityChoose == null || city.name != CityChoose.name? '' : 'active'}">
	           		 <input type="submit" id="city" name="city" onclick="" th:value="${city.name}"/>
	           	 </label>
			 </form>
            </td>
		</tr>
       </table>
	</div>
	
	<div id="my_global_container">
		<div id="stations_container">
			<div id="costumization">
				<div id="transport1_container">
					<div id="select_bike" onclick=""> 
						<img alt="Bike" src="../../../css/images/icon-bike.png" th:href="@{/css/images/icon-bike.png}"> 
					</div>
					<div id="select_bus" onclick=""> 
						<img alt="Bus" src="../../../css/images/icon-bus.png" th:href="@{/css/images/icon-bus.png}">
					</div>
				</div>
				
				<div id="search">
					<input type="text" placeholder="Entrez le nom de la station" onclick=""/>
				</div>
				
				<div id="transport2_container">
					<div id="select_train" onclick=""> 
						<img alt="Train" src="../../../css/images/icon-train.png" th:href="@{/css/images/icon-train.png}">
					</div>
					<div id="select_car" onclick=""> 
						<img alt="Car" src="../../../css/images/icon-car.png" th:href="@{/css/images/icon-car.png}">
					</div>
				</div>
			</div>
			
		    <div id="map"></div>
			
			<script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
			  integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew=="
			  crossorigin=""></script>
			
			<script type="text/javascript" src="../../../js/map_manager.js" th:href="@{/js/map_manager.js}"></script>
			
			<script type="text/javascript" th:inline="javascript" th:if="${CityChoose == null && lastLocCity == null}">
				initMap(/*[[${Cities}]]*/, 45.43992, 4.3896303, 4);
			</script>
			
			<script type="text/javascript" th:inline="javascript" th:if="${CityChoose != null && lastLocCity == null}">
				initMap(/*[[${Cities}]]*/, /*[[${CityChoose.localisation.lat}]]*/, /*[[${CityChoose.localisation.lg}]]*/, 4);
				goToCity(/*[[${CityChoose}]]*/);
			</script>
			
			<script type="text/javascript" th:inline="javascript" th:if="${CityChoose == null && lastLocCity != null}">
				initMap(/*[[${Cities}]]*/, /*[[${lastLocCity.lat}]]*/, /*[[${lastLocCity.lg}]]*/, 12);
        		reinitMap(/*[[${lastLocCity}]]*/);
			</script>
			
			<script type="text/javascript" th:inline="javascript" th:if="${CityChoose != null && lastLocCity != null}">
				initMap(null, /*[[${lastLocCity.lat}]]*/, /*[[${lastLocCity.lg}]]*/, 12);
				changeCity(/*[[${lastLocCity}]]*/, /*[[${CityChoose}]]*/);
			</script>
			
		    <div th:if="${TableChoose}">  
		        <!--table>
		            <tr>
		                <td>Nom Station</td>
		                <td>Capacité Total</td>
		                <td>Localisation lat</td>
		                <td>Localisation long</td>
		            </tr>
		            
		            <tr th:each="bikeStation : ${CityChoose.bikesStations}" >
		                <td th:text="${bikeStation.name}"></td>
		                <td th:text="${bikeStation.capacity}"></td>
		                <td th:text="${bikeStation.localisation.lat}"></td>
		                <td th:text="${bikeStation.localisation.lg}"></td>
		            </tr>
		        </table-->
	        </div>
	    </div>

	</div>
</body>

</html>
